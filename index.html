<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Powerhot VR</title>
    <meta name="description" content="Hello, World! - A-Frame">
    <script src="./node_modules/aframe/dist/aframe-master.js"></script>
    <script src="./node_modules/aframe-lerp-component/dist/aframe-lerp-component.js"></script>
    <script src="./node_modules/aframe-look-at-component/dist/aframe-look-at-component.js"></script>
    <script src="./node_modules/aframe-animation-component/dist/aframe-animation-component.js"></script>
    <script src="./node_modules/axios/dist/axios.min.js"></script>
    <script src="./node_modules/qs/dist/qs.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/2.4.1/lodash.min.js"></script>
    <script src="./node_modules/aframe-html-shader/dist/aframe-html-shader.js"></script>
    <script src="./group-opacity.js"></script>
    <script src="./when-looked-at.js"></script>
    <script src="./speech.js"></script>
    <script src="./camera-click.js"></script>
    <script src="./plays.js"></script>
    <script src="./closes-photo.js"></script>
    <script src="./facebookHelpers.js"></script>
    <script src="./shootTheScreen.js"></script>
    <script>
      window.fbAsyncInit = function() {
        FB.init({
          appId            : "214588375268980",//214588375268980, //214588375268980
          autoLogAppEvents : true,
          xfbml            : true,
          version          : 'v2.9'
        });
        FB.AppEvents.logPageView();
      };

      (function(d, s, id){
         var js, fjs = d.getElementsByTagName(s)[0];
         if (d.getElementById(id)) {return;}
         js = d.createElement(s); js.id = id;
         js.src = "//connect.facebook.net/en_US/sdk.js";
         fjs.parentNode.insertBefore(js, fjs);
       }(document, 'script', 'facebook-jssdk'));
    </script>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div style="width:100%; height:100%; position:fixed; left: 0; top: 0; z-index: -1; overflow: hidden;">
      <div id="all-html">
        <div id="social" class="social" style="width:400px; height:600px;">
          <ul>

            <li class="post">
              <div class="profile" style="background-image:url('test.png');"></div>
              <div class="icon" style="background-image:url('icons/twitter.png');"></div>
              <main>
                <h3>Sam Watkinson</h3>
                <p>lol wtf omg bbq</p>
              </main>
            </li>

            <li class="post">
              <div class="profile" style="background-image:url('test.png');"></div>
              <div class="icon" style="background-image:url('icons/fb.png');"></div>
              <main>
                <h3>Sam Watkinson</h3>
                <p>lol wtf omg bbq</p>
              </main>
            </li>

            <li class="post">
              <div class="profile" style="background-image:url('test.png');"></div>
              <div class="icon" style="background-image:url('icons/insta.png');"></div>
              <main>
                <h3>Sam Watkinson</h3>
                <p>lol wtf omg bbq</p>
              </main>
            </li>
          </ul>
        </div>
        <div id="artist" class="artist" style="width:400px; height:600px;">
          <h2>Artist</h2>
          <img src="./test.png" />
        </div>
      </div>
    </div>
    <a-scene id='armsRace'>
      <a-assets>
        <video id="video" src="slayer.mp4" muted></video>
        <img id="camera-image" src="icons/camera.png" />
      </a-assets>

      <!-- Right -->
      <a-entity
        position="4.5 2.9 -4"
        rotation="0 -30 0"
        group-opacity="0"
        when-looked-at="
          property: group-opacity;
          in: 1;
          out: 0;
          focusX: 0.3; 
          focusY: 0.8; 
          usesDomNode: #social;
        ">
        <a-plane 
          class="uses-html"
          position="0 0.5 0"
          scale="3 4.5 1.5"
          position="0 0 0"
          material="
            shader: html; 
            fps: 0;
            target: #all-html; 
            width: 400;
            height: 600;
          ">
        </a-plane>
        <a-plane
          camera-click
          class="clickable"
          position="0 -2.2 0"
          scale="3 0.65 1"
          material="
            color: white;
          ">
        </a-plane>
        <a-image
          position="0 -2.2 0.01"
          scale="0.4 0.38 0.4"
          src="#camera-image"
          >
        </a-image>
      </a-entity>

      <!-- Left -->
      <a-entity
        position="-4.5 2.9 -4"
        rotation="0 30 0"
        group-opacity="0"
        when-looked-at="
          property: group-opacity;
          in: 1;
          out: 0;
          focusX: 0.3; 
          focusY: 0.8; 
          usesDomNode: #artist;
        ">
        <a-plane 
          class="uses-html"
          position="0 0.5 0"
          scale="3 4.5 1.5"
          position="0 0 0"
          material="
            shader: html; 
            fps: 0;
            target: #all-html; 
            width: 400;
            height: 600;
            ">
        </a-plane>
      </a-entity>

      <!-- Down -->
      <a-entity
        position="0 0.2 -2"
        look-at="#camera"
        group-opacity="0"
        when-looked-at="
          property: group-opacity;
          in: 1;
          out: 0;
          focusX: 2; 
          focusY: 0.4; 
        ">

        <!-- playbill -->
        <a-plane
          position="-0.55 0 0"
          scale="2.4 1 1"
          material="color: white;">
        </a-plane>
        <a-text
          position="-1.7 0.4 0.01"
          value="UP NEXT"
          color="#464646"
          font-size="8"
          scale="0.4 0.4 0.4"
          wrap-pixels="1100">
        </a-text>


        <!-- settings -->
        <a-plane
          position="1.25 0.275 0"
          scale="1 0.45 1"
          material="color: white;"
          class="clickable">
        </a-plane>
        <a-text
          position="0.85 0.4 0.01"
          value="SETTINGS"
          color="#464646"
          font-size="8"
          scale="0.4 0.4 0.4"
          wrap-pixels="1100">
        </a-text>


        <!-- move -->
        <a-plane
          position="1.25 -0.275 0"
          scale="1 0.45 1"
          material="color: white;"
          class="clickable">
        </a-plane>
        <a-text
          position="0.85 -0.125 0.01"
          value="MOVE"
          color="#464646"
          font-size="8"
          scale="0.4 0.4 0.4"
          wrap-pixels="1100">
        </a-text>
      </a-entity>

      <!-- Image UI -->
      <a-entity
        position="0 1.6 -3"
        rotation="0 0 0"
        id="take-photo"
        group-opacity="0"
        >
        <a-plane 
          id="photo-preview"
          opacity="0"
          position="0 0.5 0"
          scale="4 2 1.5">
        </a-plane>
        <a-text
          position="0 2 0"
          rotation="15 0 0"
          value="Say 'SNAP' to take a photo or 'CANCEL' to stop."
          color="#fff"
          align="center"
          scale="0.5 0.5 0.5"
          font-size="24"
          >
        </a-text>


        <a-plane 
          position="0 -0.9 0"
          scale="1.5 0.45 1.5"
          material="color: white;"
          class="clickable"
          closes-photo>
        </a-plane>
        <a-text 
          position="0 -0.9 0.01"
          value="CANCEL"
          color="#464646"
          align="center"
          font-size="8"
          scale="0.5 0.5 0.5"
          >
        </a-text>
      </a-entity>



      <a-camera id="camera">
        <a-entity
          cursor="fuse: true; fuseTimeout: 750"
          raycaster="objects: .clickable"
          scale="0.1 0.1 0.1"
          position="0 0 -1"
          geometry="primitive: ring;"
          material="color: white; opacity: 0;">
          <a-animation
            begin="click"
            dur="400"
            easing="ease-out"
            attribute="scale"
            from="0.01 0.01 0.01"
            to="0.1 0.1 0.1">
          </a-animation>
          <a-animation
            begin="cursor-fusing"
            dur="750"
            easing="ease-in"
            attribute="scale"
            from="0.1 0.1 0.1"
            to="0.01 0.01 0.01">
          </a-animation>
          <a-animation
            begin="mouseenter"
            dur="250"
            easing="ease-in"
            attribute="material.opacity"
            to="1">
          </a-animation>
          <a-animation
            begin="mouseleave"
            dur="250"
            easing="ease-out"
            attribute="material.opacity"
            to="0">
          </a-animation>
        </a-entity>
      </a-camera>


      <a-videosphere
        id="videosphere"
        src="#video"
        rotation="0 265 0"
        segments-height="16"
        segments-width="16">
      </a-videosphere>
    </a-scene>
    <script>
      document.getElementById('video').pause();
    </script>
  </body>
</html>
